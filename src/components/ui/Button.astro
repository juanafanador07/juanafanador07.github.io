---
import { cva, type VariantProps } from "class-variance-authority";
import Spotlight from "@components/Spotlight.astro";
import { Icon } from "astro-icon/components";
import type { HTMLTag, Polymorphic } from "astro/types";
import { cn } from "@utils/cn";

const button = cva("inline-flex gap-2 items-center rounded-xl font-bold", {
  variants: {
    variant: {
      primary:
        "bg-red-500 text-white border-2 border-emerald-600 bg-linear-to-r from-emerald-500 to-teal-500",
      secondary: "text-emerald-500 bg-white border-2 border-current",
    },
    size: {
      default: "px-2 py-1",
      lg: "p-3",
      icon: "p-2",
    },
  },
});

type Props<Tag extends HTMLTag> = Polymorphic<
  {
    as: Tag;
    icon?: string;
  } & VariantProps<typeof button>
>;

const {
  as: Tag = "button",
  icon,
  class: className,
  variant = "primary",
  size = "default",
  ...props
} = Astro.props;
---

<Spotlight class={className}>
  <Tag class={cn(button({ variant, size }))} {...props}>
    {icon && <Icon name={icon} size={24} />}
    <slot />
  </Tag>
</Spotlight>
